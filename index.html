<html>
<head>
	<style type="text/css">
		.card {
		  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
		  transition: 0.3s;
		  width: 80%;
		  margin: 20 auto;
		  padding: 10px;
		  height: 200px;
		}

		.card:hover {
		  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
		}
		.leftdata{
			float: left;
			display: inline-block;
			width: 70%;
			height: 100%;	
		}
		.rightimg{
			float:left;
			display: inline-block;
			width: 30%;
			height: 100%;
		}
		.footerdiv{
			width: 100%; 
			
		}
		.tags{
			float:left;
		}
		.footer-element{
			float: left;
		}
		.footerdiv{
			display: block;
			width: 100%;
		}
		.card-data{
			height: 80%;
			width: 100%;
		}
		.keys{
			text-align: center;
			border-style: groove;
			border-color:blue;
			/*border: 2px;*/
			display: inline-block;
			margin: 0 auto;
			width: 100%; 
		}
		.icons-inline{
			display: inline-block;	

		}
		.website-heading{
			text-align: center;
		}
		.skull{
			height: 20px;
			width: 20px;
		}
	</style>
	<!-- font awesome -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

	<title>Hackaday Project Listing</title>
<!-- 	<script src="vanilla.js"></script> -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script type="text/javascript">
		
		$(document).ready(function(){
			$.ajax({
				url: "http://localhost:4000/projectlist/1", 
				success: function(result){
					display_projects(result);
				}
			});
		});

		function display_projects(result){
			var html_string = ""
			console.log(result.body.projects.length);
			//console.log(typeof(result));
			var project_array = result.body.projects
			for (var i = 0; i < project_array.length; i++) {
					html_string += "<div class='card'>";
					html_string += "<div class='card-data'>";
					html_string += "<div class='leftdata'>"; 
					html_string += "<h3 class='name'>"+ project_array[i].name + "</h3>"; 
					html_string += "<p class='summary'>"+ project_array[i].summary + "</p>"; 
					html_string += "<p class='tags'>Tags: </p>";
					tag_array = project_array[i].tags;
					for(var j=0; j<Math.min(tag_array.length,3) ;j++){
						html_string += "<p class='tags'>"+ tag_array[j] + ", </p>"; 
				 	}

					html_string += "</div>"; // div leftdata ends

					html_string += "<div class='rightimg'><img src='" + project_array[i].image_url + "' style='height:100%; width:100%;'></div>";//image div	
					html_string += "</div>"; // card-data div

					html_string += "<div class='footerdiv footer-element'>"; 
					html_string += "<p class='footer-element'><i class='fas fa-users'></i> " + project_array[i].followers + " </p>";
					html_string += "<p class='footer-element'><i class='far fa-comments'></i> " + project_array[i].comments + " </p>";
					html_string += "<p class='footer-element'><i class='far fa-eye'></i> " + project_array[i].views + " </p>";

					html_string += "</div>"; //footer div ends

					html_string += "</div>"; //card div ends
					
					console.log(html_string);
			}

			$('.load-data').append(html_string); 
	
		}

	</script>

</head>
<body>

	<div class="maindiv">
		<div class="headers">
			<h2 class="website-heading" >Hackaday API Project Listing</h2>
			<div class="keys">
				<b>Keys:</b>
				<div class="icons-inline">
					Followers: 
					<i class="fas fa-users"></i>
				</div>
				<div class="icons-inline">
					Views: 
					<i class="far fa-eye"></i>
				</div>
				<div class="icons-inline">
					Comments: 
					<i class="far fa-comments"></i>
				</div>
			</div>
		</div>

		<div class="load-data">
			
		</div>
	</div>
</body>
</html>

