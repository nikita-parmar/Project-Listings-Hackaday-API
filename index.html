<html>
<head>
	<style type="text/css">
		.card {
		  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
		  transition: 0.3s;
		  width: 80%;
		  margin: 20 auto;
		  padding: 10px;
		  height: 200px;
		}

		.card:hover {
		  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
		}
		.leftdata{
			float: left;
			display: inline-block;
			width: 70%;
			height: 100%;	
		}
		.rightimg{
			float:left;
			display: inline-block;
			width: 30%;
			height: 100%;
		}
		.footerdiv{
			width: 100%; 
			
		}
		.tags{
			float:left;
		}
		.footer-element{
			float: left;
		}
		.footerdiv{
			display: block;
			width: 100%;
		}
		.card-data{
			height: 80%;
			width: 100%;
		}
		.keys{
			text-align: center;
			border-style: groove;
			border-color:blue;
			/*border: 2px;*/
			display: inline-block;
			margin: 0 auto;
			width: 100%; 
		}
		.icons-inline{
			display: inline-block;	

		}
		.website-heading{
			text-align: center;
		}
		.footers{
			width: 100%;
			margin: 0 auto;
		}
	</style>
	<!-- font awesome -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

	<title>Hackaday Project Listing</title>
<!-- 	<script src="vanilla.js"></script> -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
	
	<!-- Simple pagination jquery and css -->
	<script type="text/javascript" src="./simplePagination/jquery.simplePagination.js"></script>
	<link type="text/css" rel="stylesheet" href="./simplePagination/simplePagination.css"/>
	<script type="text/javascript">
		
		var total_items = 20916;
		var per_page = 50;	 

		$(document).ready(function(){
			$.ajax({
				url: "http://localhost:4000/projectlist/1", 
				success: function(result){
					total_items = result.body.per_page;
					per_page = result.body.total;

					display_projects(result);
				}
			});
		});

		function display_projects(result){
			$(".onepagedata").remove();
			
			var html_string = ""
			console.log(result.body.page);
			var project_array = result.body.projects
			html_string += "<div class='onepagedata'>"
			for (var i = 0; i < project_array.length; i++) {

					html_string += "<div class='card'>";
					html_string += "<div class='card-data'>";
					html_string += "<div class='leftdata'>"; 
					html_string += "<h3 class='name'>"+ project_array[i].name + "</h3>"; 
					html_string += "<p class='summary'>"+ project_array[i].summary + "</p>"; 
					html_string += "<p class='tags'>Tags: </p>";
					tag_array = project_array[i].tags;
					if(tag_array!=null){
						for(var j=0; j<Math.min(tag_array.length,3) ;j++){
							html_string += "<p class='tags'>"+ tag_array[j] + ", </p>"; 
					 	}
					}

					html_string += "</div>"; // div leftdata ends

					html_string += "<div class='rightimg'><img src='" + project_array[i].image_url + "' style='height:100%; width:100%;'></div>";//image div	
					html_string += "</div>"; // card-data div

					html_string += "<div class='footerdiv footer-element'>"; 
					html_string += "<p class='footer-element'><i class='fas fa-users'></i> " + project_array[i].followers + " </p>";
					html_string += "<p class='footer-element'><i class='far fa-comments'></i> " + project_array[i].comments + " </p>";
					html_string += "<p class='footer-element'><i class='far fa-eye'></i> " + project_array[i].views + " </p>";

					html_string += "</div>"; //footer div ends

					html_string += "</div>"; //card div ends

			}
			html_string += "</div>" //onepagedata div ends
			$('.load-data').append(html_string); 
	
		}
		//Pagination
		$(function() {
		    $("#pagination").pagination({
		        items: total_items,
		        itemsOnPage: per_page,
		        cssStyle: 'light-theme',
		        onPageClick: function(pageNumber, event){
		        	$.ajax({
		        		url: "http://localhost:4000/projectlist/"+pageNumber, 
		        		success: function(result){
		        			display_projects(result);
		        		}
		        	});
		        }
		    });
		});

	</script>

</head>
<body>

	<div class="maindiv">
		<div class="headers">
			<h2 class="website-heading" >Hackaday API Project Listing</h2>
			<div class="keys">
				<b>Keys:</b>
				<div class="icons-inline">
					Followers: 
					<i class="fas fa-users"></i>
				</div>
				<div class="icons-inline">
					Views: 
					<i class="far fa-eye"></i>
				</div>
				<div class="icons-inline">
					Comments: 
					<i class="far fa-comments"></i>
				</div>
			</div>
		</div>

		<div class="load-data">
			
		</div>

		<div class="footers">
			<div id="pagination"></div>
		</div>
	</div>
</body>
</html>

